# 数列的求和

这一节我们先简单了解一下连加号的基本性质，随后讲述数列的基本求和方法。

## 连加号的概念和基本性质

### 连加号的定义

在数学上，若干个数（或其他数学对象）连续相加的表达式

$$
a_m + a_{m+1} + a_{m+2} + \cdots + a_n
$$

（其中$m,n \in \mathbb{Z}$，且$m < n$)非常常见。为了简便，我们通常将它记作：

$$
\sum_{k=n}^n a_k.
$$

其中符号$\sum$称为连加号，实际上就是希腊字母$\Sigma$(Sigma)，$a_k$则表示一般项，而下标中$k$为求和指标，它只是一个辅助的变量（可以类比编程函数的局部变量），标记求和中改变的值。下标$k=m$和上标$n$共同表示$k$从$m$以步长1递增到$n$（也就是，取$m,m+1,m+2,\dots,n$）

只要不与其他变量冲突，辅助变量的字母是任意的，通常取$i,j,k,m$。

!!! Notation

    连加号的上限也可能为无穷大$\infty$：
    
    $$
    \sum_{n=1}^{\infty} (-1)^{n+1} \frac{1}{n}.
    $$
    
    这种情况的连加号表示无穷项相加，是一个**级数**。我们这里只讨论有限项的连加，不考虑无限项相加的情况。

以下是一些连加号的使用举例：

!!! Example

    $$
    \sum_{i=1}^{n} i = 1 + 2 + \cdots + n.
    $$
    
    $$
    (x + y)^n = \sum_{k = 1}^{n}  \binom{n}{k} x^k y^{n-k}.
    $$
    
    在回归分析中，经过样本点$(x_1,y_1),(x_2,y_2),\dots,(x_n,y_n)$的拟合直线（目标函数使用最小二乘函数）的斜率估计值可以表示为：
    
    $$
    \hat{k} = \frac{\displaystyle \sum_{i=1}^n (x_i - \bar{x}) (y_i - \bar{y})}{\displaystyle \sum_{i=1}^n (x_i - \bar{x})^2 }.
    $$
    
    连加号也不一定表示数。高等代数中子空间的和$V_1 + V_2 + \cdots + V_n$也可以表示为
    
    $$
    \sum_{i=1}^n V_i.
    $$

!!! Tip

    很多时候，数学书上的公式为了简便会写成连加号。
    
    但其实，连加号看起来并不是很直观。所以当你感到难以理解时，应该将连加号展开，写成带省略号的加和表达式。很多时候，只是这样小小的一步，一个表达式瞬间就清晰了很多。

### 连加号的基本性质

连加号本质上就是几个数之间加法的简写，所以自然地有以下性质：

#### 可加性

$$
\sum_{k=m}^n (x_k + y_k) = \sum_{k=m}^n x_k + \sum_{k=m}^n y_k .
$$

这条规律由加法的结合律容易看出来，这也是分组求和法的基础。

??? Note "Proof"

    回忆上面的Tip，我们只需要将左边展开写成和式：
    
    $$
    \begin{align}
    \sum_{k=m}^n (x_k + y_k) =& (x_m + y_m) + (x_{m+1} + y_{m+1}) + \cdots + (x_n + y_n)\\
    =& (x_m + x_{m+1} + \cdots + x_n) + (y_m + y_{m+1} + \cdots + y_n)\\
    =& \sum_{k=m}^n x_k + \sum_{k=m}^n y_k.\\
    \end{align}
    $$
    
    其中第二个等号利用了结合律。
    
    这再次印证了上面这句话：<u>当你感到难以理解时，应该将连加号展开，写成带省略号的加和表达式</u>。

#### 一阶齐次性（常数提取）

若$k$是一个常数：

$$
\sum_{i=m}^n k x_i = k \sum_{i=m}^n x_i.
$$

这是乘法分配律的直接推论。

!!! Notation

    可加性和一阶齐次性可以统称为**线性**(linearity)。也就是说，连加号满足以下的性质：

    $$
    \sum_{k=m}^n (ax_k + by_k) = a\sum_{k=m}^n x_k + b\sum_{k=m}^n y_k.
    $$

    其中$a$和$b$是常数。

#### 交换次序

$$
\sum_{i=1}^m \sum_{j=1}^n a_{ij} = \sum_{j=1}^n \sum_{i=1}^m a_{ij}
$$

这也是加法交换律和加法结合律的直接推论。

!!! Notation

    对于交换次序这个性质，一种直观的理解就是，表格中的数可以先按列求和、再按行求和，也可以先按行求和、再按列求和，例如：

    |            | **第一列** | **第二列** | **第三列** | **行合计** |
    | ---------- | ---------- | ---------- | ---------- | ---------- |
    | **第一行** | 1          | 2          | 3          | 6          |
    | **第二行** | 4          | 5          | 6          | 15         |
    | **第三行** | 7          | 8          | 9          | 24         |
    | **列合计** | 12         | 15         | 18         | 45         |

    这里第四行的“列合计”可以看作先按列求和，而第四列的“行合计”可以看作先对行求和，但是汇总后，列合计的三个数之和，也等于行合计的三个数之和。

??? Warning

    研究连加号交换次序的性质时，我们针对的都是**有限**项的求和，要求两个求和指标都是对有限个求和。
    
    <u>这个结论**不能**轻易推广到无限项相加（级数），在级数上未必成立</u>！

## 常数、等差、等比数列的求和

这是三个基本公式。

* 若$a_n = a$($a$为常数)，则$S_n = na$。
* 若$a_n$为等差数列，也就是$a_n = a_1 + d(n - 1)$，则：

$$
\begin{align}
S_n 
=& \frac{(a_1+a_n)n}{2} \\
=& a_1 n + \frac{dn(n-1)}{2} \\
=& \left( a_1 - \frac{d}{2} \right) n + \frac{d}{2} n^2.
\end{align}
$$

* 若$a_n$为等比数列，也就是$a_n = a_1 q^{n-1}$，则：

$$
S_n = \frac{a_1(1-q^n)}{1-q}
$$

## 高中常见的求和方法

以下的几种求和方法在高中已经很常见，现在罗列出来供大家参考。
### 分组求和

### 倒序相加法

### 错位相减法

### 裂项法

## 求和的其他方法

### 导数法

### Abel变换

## 特殊求和数列

### 三角函数求和

### 

